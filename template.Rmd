---
title: "Paquete calidad"
subtitle: "<br/>Instituto Nacional de Estadísticas"
author: "Klaus Lehmann, Ricardo Pizarro e Ignacio Agloni"
institute: "Latin R 2021"
date: "10-12 de noviembre de 2021"
output:
  xaringan::moon_reader:
    css: ["latinR.css"]
    self_contained: true
    lib_dir: libs
    nature:
      ratio: '16:9'
---

# ¿Qué quiere decir la calidad estadística?

Las medias (y cualquier otro estadístico) obtenidas de una muestra son estimaciones de un parámetro poblacional

--

```{r, warning=FALSE, message=FALSE, echo=FALSE, fig.align= "center", fig.height=4}
library(ggplot2)
library(tidyverse)
values <- rnorm(100000, mean = 0, sd = 1)
data <- data.frame(x = values)

ggplot(data, aes(x = x, fill = "coral")) +
  geom_density() +
  geom_vline(aes(xintercept = mean(x)), linetype = "dashed" ) +
  geom_vline(xintercept = 1.96, linetype = "dashed", color = "red" ) +
  geom_vline(xintercept = -1.96, linetype = "dashed", color = "red" ) +
  theme(legend.position = "none",
        axis.title = element_blank(),
        axis.text = element_text(size = 14) 
        )



```

Nuestra estimación se encuentra dentro de un intervalo, con cierta probabilidad

---

# Pensemos en 2 distribuciones distintas

.pull-left[

```{r,  fig.align= "center", fig.height=4, echo=FALSE}
values1 <- rnorm(100000, mean = 0, sd = 10)
ci_1 <- c(mean(values1) - 1.96 * sd(values1), mean(values1) + 1.96 * sd(values1))

values2 <- rnorm(100000, mean = 0, sd = 4)
ci_2 <- c(mean(values2) - 1.96 * sd(values2), mean(values2) + 1.96 * sd(values2))


distributions <- bind_rows(bind_cols(values = values1, varianza = "alta varianza"),  bind_cols(values = values2, varianza = "baja varianza")) 

distributions %>%
  ggplot() + 
  geom_density(aes(x = values, fill = varianza), alpha=0.5) +
  labs(title = "Alta y baja varianza") +
  theme(plot.title = element_text(hjust = 0.5, size = 20),
        axis.title = element_blank(),
        legend.text = element_text(size = 12),
         axis.text = element_text(size = 14) 
        )


```
]
--

.pull-right[

```{r, fig.align= "center", echo=FALSE, fig.height=4 }
df <- data.frame(estimacion = c("alta varianza", "alta varianza", "baja varianza", "baja varianza"), valor = c(ci_1, ci_2))


ggplot(df, aes(x = as.factor(estimacion), y = valor)) +
  geom_point() +
  geom_segment(aes(x = estimacion , xend = estimacion, y = 0, yend = valor, colour = "segment")) +
  coord_flip() +
  geom_hline(yintercept = 0, linetype = "dashed") +
  labs(title = "Intervalos de confianza") +
  theme(legend.position = "none",
        axis.title = element_blank(),
        plot.title = element_text(hjust = 0.5, size = 20),
        axis.text = element_text(size = 14) 
        
        )

```
]

--

Intervalos de confianza demasiado amplios, no son informativos

--

Una estimación debe cumplir una cierta precisión (calidad) para que sea útil 

---

# Ejemplo de una estimación con baja precisión


.pull-left[
<img src="mafalda_miguelito.PNG" width="400" />

]

--

.pull-right[
<img src="miguelito.png" width="300" />

]




---
# ¿Cómo medir la calidad de una estimación?

- Tamaño de muestra
- Tamaño de muestra efectivo
- Grados de libertad
- Error estándar
- Coeficiente de variación (y logarítmico)
- Conteo no ponderado
- Error relativo
 
--

¿Y qué hago con todo esto?

.center[
<img src="https://media.giphy.com/media/a5viI92PAF89q/giphy.gif" width="200" />
]



---

class: chapter-slide

# Paquete calidad

---

## Crea algunas gráficas

Recomendamos usar el paquete [viridis](https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html) para crear gráficas amigables con las personas con daltonismo. 

Veamos cómo lucen algunas gráficas con diversos tipos de dificultades visuales usando [colorblindr](https://github.com/clauswilke/colorblindr):

```{r, echo=FALSE, message=FALSE}
library(datos)
library(ggplot2)
#library(colorblindr)
library(viridis)
```

---
class: middle, center



---

Ahora usemos colores más amigables con scale_fill_viridis()

---

# Alt-text

Recuerda agregar texto alternativo a tus figuras, describiendo los elementos que contienen y el mensaje que deseas transmitir con ellas.

Puedes usar la opción fig.alt del chunk de R para agregar el texto alternativo.
